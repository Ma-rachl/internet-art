{"ast":null,"code":"import * as utils from '../common/utils.js';\nimport { getSlideOrSection } from '../common/utilsFP.js';\nimport { getOptions } from '../common/options.js';\nimport { onMediaLoad } from '../media.js';\n/**\n* Lazy loads image, video and audio elements.\n*/\nexport function lazyLoad(destiny) {\n  if (!getOptions().lazyLoading) {\n    return;\n  }\n  var panel = getSlideOrSection(destiny);\n  utils.$('img[data-src], img[data-srcset], source[data-src], source[data-srcset], video[data-src], audio[data-src], iframe[data-src]', panel).forEach(function (element) {\n    ['src', 'srcset'].forEach(function (type) {\n      var attribute = utils.getAttr(element, 'data-' + type);\n      if (attribute != null && attribute) {\n        utils.setSrc(element, type);\n        element.addEventListener('load', function () {\n          onMediaLoad(destiny);\n        });\n      }\n    });\n    if (utils.matches(element, 'source')) {\n      var elementToPlay = utils.closest(element, 'video, audio');\n      if (elementToPlay) {\n        elementToPlay.load();\n        elementToPlay.onloadeddata = function () {\n          onMediaLoad(destiny);\n        };\n      }\n    }\n  });\n}","map":{"version":3,"names":["utils","getSlideOrSection","getOptions","onMediaLoad","lazyLoad","destiny","lazyLoading","panel","$","forEach","element","type","attribute","getAttr","setSrc","addEventListener","matches","elementToPlay","closest","load","onloadeddata"],"sources":["/Users/rachelma/college/2023/fall/2223/internet-art/src/js/lazyLoad/lazyLoad.js"],"sourcesContent":["import * as utils from '../common/utils.js'; \nimport { getSlideOrSection } from '../common/utilsFP.js';\nimport { getOptions } from '../common/options.js';\nimport { onMediaLoad } from '../media.js'; \n/**\n* Lazy loads image, video and audio elements.\n*/\nexport function lazyLoad(destiny){\n    if (!getOptions().lazyLoading){\n        return;\n    }\n\n    var panel = getSlideOrSection(destiny);\n\n    utils.$('img[data-src], img[data-srcset], source[data-src], source[data-srcset], video[data-src], audio[data-src], iframe[data-src]', panel).forEach(function(element){\n        ['src', 'srcset'].forEach(function(type){\n            var attribute = utils.getAttr(element, 'data-' + type);\n            if(attribute != null && attribute){\n                utils.setSrc(element, type);\n                element.addEventListener('load', function(){\n                    onMediaLoad(destiny);\n                });\n            }\n        });\n\n        if(utils.matches(element, 'source')){\n            var elementToPlay =  utils.closest(element, 'video, audio');\n            if(elementToPlay){\n                elementToPlay.load();\n                elementToPlay.onloadeddata = function(){\n                    onMediaLoad(destiny);\n                };\n            }\n        }\n    });\n}"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,oBAAoB;AAC3C,SAASC,iBAAiB,QAAQ,sBAAsB;AACxD,SAASC,UAAU,QAAQ,sBAAsB;AACjD,SAASC,WAAW,QAAQ,aAAa;AACzC;AACA;AACA;AACA,OAAO,SAASC,QAAQA,CAACC,OAAO,EAAC;EAC7B,IAAI,CAACH,UAAU,CAAC,CAAC,CAACI,WAAW,EAAC;IAC1B;EACJ;EAEA,IAAIC,KAAK,GAAGN,iBAAiB,CAACI,OAAO,CAAC;EAEtCL,KAAK,CAACQ,CAAC,CAAC,4HAA4H,EAAED,KAAK,CAAC,CAACE,OAAO,CAAC,UAASC,OAAO,EAAC;IAClK,CAAC,KAAK,EAAE,QAAQ,CAAC,CAACD,OAAO,CAAC,UAASE,IAAI,EAAC;MACpC,IAAIC,SAAS,GAAGZ,KAAK,CAACa,OAAO,CAACH,OAAO,EAAE,OAAO,GAAGC,IAAI,CAAC;MACtD,IAAGC,SAAS,IAAI,IAAI,IAAIA,SAAS,EAAC;QAC9BZ,KAAK,CAACc,MAAM,CAACJ,OAAO,EAAEC,IAAI,CAAC;QAC3BD,OAAO,CAACK,gBAAgB,CAAC,MAAM,EAAE,YAAU;UACvCZ,WAAW,CAACE,OAAO,CAAC;QACxB,CAAC,CAAC;MACN;IACJ,CAAC,CAAC;IAEF,IAAGL,KAAK,CAACgB,OAAO,CAACN,OAAO,EAAE,QAAQ,CAAC,EAAC;MAChC,IAAIO,aAAa,GAAIjB,KAAK,CAACkB,OAAO,CAACR,OAAO,EAAE,cAAc,CAAC;MAC3D,IAAGO,aAAa,EAAC;QACbA,aAAa,CAACE,IAAI,CAAC,CAAC;QACpBF,aAAa,CAACG,YAAY,GAAG,YAAU;UACnCjB,WAAW,CAACE,OAAO,CAAC;QACxB,CAAC;MACL;IACJ;EACJ,CAAC,CAAC;AACN"},"metadata":{},"sourceType":"module","externalDependencies":[]}