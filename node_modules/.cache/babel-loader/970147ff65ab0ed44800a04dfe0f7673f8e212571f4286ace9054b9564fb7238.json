{"ast":null,"code":"import * as utils from '../common/utils.js';\nimport { getOptions, setVariableState } from '../common/options.js';\nimport { state } from '../common/state.js';\nimport { FP } from '../common/constants.js';\nimport { getAnchorsURL } from '../anchors/getAnchorsURL.js';\nimport { EventEmitter } from '../common/eventEmitter.js';\nimport { events } from '../common/events.js';\nFP.setLockAnchors = setLockAnchors;\nEventEmitter.on(events.bindEvents, bindEvents);\nfunction bindEvents() {\n  //detecting any change on the URL to scroll to the given anchor link\n  //(a way to detect back history button as we play with the hashes on the URL)\n  utils.windowAddEvent('hashchange', hashChangeHandler);\n  EventEmitter.on(events.onDestroy, onDestroy);\n}\nfunction onDestroy() {\n  utils.windowRemoveEvent('hashchange', hashChangeHandler);\n}\n\n/**\n* Sets lockAnchors\n*/\nfunction setLockAnchors(value) {\n  getOptions().lockAnchors = value;\n}\n\n/**\n* Detecting any change on the URL to scroll to the given anchor link\n* (a way to detect back history button as we play with the hashes on the URL)\n*/\nfunction hashChangeHandler() {\n  if (!state.isScrolling && !getOptions().lockAnchors) {\n    var anchors = getAnchorsURL();\n    var sectionAnchor = anchors.section;\n    var slideAnchor = anchors.slide;\n\n    //when moving to a slide in the first section for the first time (first time to add an anchor to the URL)\n    var isFirstSlideMove = typeof state.lastScrolledDestiny === 'undefined';\n    var isFirstScrollMove = typeof state.lastScrolledDestiny === 'undefined' && typeof slideAnchor === 'undefined' && !state.slideMoving;\n    if (sectionAnchor && sectionAnchor.length) {\n      /*in order to call scrollpage() only once for each destination at a time\n      It is called twice for each scroll otherwise, as in case of using anchorlinks `hashChange`\n      event is fired on every scroll too.*/\n      if (sectionAnchor && sectionAnchor !== state.lastScrolledDestiny && !isFirstSlideMove || isFirstScrollMove || !state.slideMoving && state.lastScrolledSlide != slideAnchor) {\n        EventEmitter.emit(events.onScrollPageAndSlide, {\n          sectionAnchor: sectionAnchor,\n          slideAnchor: slideAnchor\n        });\n      }\n    }\n  }\n}","map":{"version":3,"names":["utils","getOptions","setVariableState","state","FP","getAnchorsURL","EventEmitter","events","setLockAnchors","on","bindEvents","windowAddEvent","hashChangeHandler","onDestroy","windowRemoveEvent","value","lockAnchors","isScrolling","anchors","sectionAnchor","section","slideAnchor","slide","isFirstSlideMove","lastScrolledDestiny","isFirstScrollMove","slideMoving","length","lastScrolledSlide","emit","onScrollPageAndSlide"],"sources":["/Users/rachelma/college/2023/fall/2223/internet-art/src/js/anchors/index.js"],"sourcesContent":["import * as utils from '../common/utils.js';\nimport { getOptions, setVariableState } from '../common/options.js';\nimport { state } from '../common/state.js';\nimport { FP } from '../common/constants.js';\nimport { getAnchorsURL } from '../anchors/getAnchorsURL.js';\nimport { EventEmitter } from '../common/eventEmitter.js';\nimport { events } from '../common/events.js';\n\nFP.setLockAnchors = setLockAnchors;\nEventEmitter.on(events.bindEvents, bindEvents);\n\nfunction bindEvents(){\n    //detecting any change on the URL to scroll to the given anchor link\n    //(a way to detect back history button as we play with the hashes on the URL)\n    utils.windowAddEvent('hashchange', hashChangeHandler);\n    EventEmitter.on(events.onDestroy, onDestroy);\n}\n\n\nfunction onDestroy(){\n    utils.windowRemoveEvent('hashchange', hashChangeHandler);\n}\n\n/**\n* Sets lockAnchors\n*/\nfunction setLockAnchors(value){\n    getOptions().lockAnchors = value;\n}\n\n/**\n* Detecting any change on the URL to scroll to the given anchor link\n* (a way to detect back history button as we play with the hashes on the URL)\n*/\nfunction hashChangeHandler(){\n    if(!state.isScrolling && !getOptions().lockAnchors){\n        var anchors = getAnchorsURL();\n        var sectionAnchor = anchors.section;\n        var slideAnchor = anchors.slide;\n\n        //when moving to a slide in the first section for the first time (first time to add an anchor to the URL)\n        var isFirstSlideMove = typeof state.lastScrolledDestiny === 'undefined';\n        var isFirstScrollMove = (typeof state.lastScrolledDestiny === 'undefined' && typeof slideAnchor === 'undefined' && !state.slideMoving);\n\n        if(sectionAnchor && sectionAnchor.length){\n            /*in order to call scrollpage() only once for each destination at a time\n            It is called twice for each scroll otherwise, as in case of using anchorlinks `hashChange`\n            event is fired on every scroll too.*/\n            if ((sectionAnchor && sectionAnchor !== state.lastScrolledDestiny) && !isFirstSlideMove || \n                isFirstScrollMove || \n                (!state.slideMoving && state.lastScrolledSlide != slideAnchor )){\n                    EventEmitter.emit(events.onScrollPageAndSlide, {\n                        sectionAnchor: sectionAnchor,\n                        slideAnchor: slideAnchor\n                    });\n            }\n        }\n    }\n}"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,oBAAoB;AAC3C,SAASC,UAAU,EAAEC,gBAAgB,QAAQ,sBAAsB;AACnE,SAASC,KAAK,QAAQ,oBAAoB;AAC1C,SAASC,EAAE,QAAQ,wBAAwB;AAC3C,SAASC,aAAa,QAAQ,6BAA6B;AAC3D,SAASC,YAAY,QAAQ,2BAA2B;AACxD,SAASC,MAAM,QAAQ,qBAAqB;AAE5CH,EAAE,CAACI,cAAc,GAAGA,cAAc;AAClCF,YAAY,CAACG,EAAE,CAACF,MAAM,CAACG,UAAU,EAAEA,UAAU,CAAC;AAE9C,SAASA,UAAUA,CAAA,EAAE;EACjB;EACA;EACAV,KAAK,CAACW,cAAc,CAAC,YAAY,EAAEC,iBAAiB,CAAC;EACrDN,YAAY,CAACG,EAAE,CAACF,MAAM,CAACM,SAAS,EAAEA,SAAS,CAAC;AAChD;AAGA,SAASA,SAASA,CAAA,EAAE;EAChBb,KAAK,CAACc,iBAAiB,CAAC,YAAY,EAAEF,iBAAiB,CAAC;AAC5D;;AAEA;AACA;AACA;AACA,SAASJ,cAAcA,CAACO,KAAK,EAAC;EAC1Bd,UAAU,CAAC,CAAC,CAACe,WAAW,GAAGD,KAAK;AACpC;;AAEA;AACA;AACA;AACA;AACA,SAASH,iBAAiBA,CAAA,EAAE;EACxB,IAAG,CAACT,KAAK,CAACc,WAAW,IAAI,CAAChB,UAAU,CAAC,CAAC,CAACe,WAAW,EAAC;IAC/C,IAAIE,OAAO,GAAGb,aAAa,CAAC,CAAC;IAC7B,IAAIc,aAAa,GAAGD,OAAO,CAACE,OAAO;IACnC,IAAIC,WAAW,GAAGH,OAAO,CAACI,KAAK;;IAE/B;IACA,IAAIC,gBAAgB,GAAG,OAAOpB,KAAK,CAACqB,mBAAmB,KAAK,WAAW;IACvE,IAAIC,iBAAiB,GAAI,OAAOtB,KAAK,CAACqB,mBAAmB,KAAK,WAAW,IAAI,OAAOH,WAAW,KAAK,WAAW,IAAI,CAAClB,KAAK,CAACuB,WAAY;IAEtI,IAAGP,aAAa,IAAIA,aAAa,CAACQ,MAAM,EAAC;MACrC;AACZ;AACA;MACY,IAAKR,aAAa,IAAIA,aAAa,KAAKhB,KAAK,CAACqB,mBAAmB,IAAK,CAACD,gBAAgB,IACnFE,iBAAiB,IAChB,CAACtB,KAAK,CAACuB,WAAW,IAAIvB,KAAK,CAACyB,iBAAiB,IAAIP,WAAa,EAAC;QAC5Df,YAAY,CAACuB,IAAI,CAACtB,MAAM,CAACuB,oBAAoB,EAAE;UAC3CX,aAAa,EAAEA,aAAa;UAC5BE,WAAW,EAAEA;QACjB,CAAC,CAAC;MACV;IACJ;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}