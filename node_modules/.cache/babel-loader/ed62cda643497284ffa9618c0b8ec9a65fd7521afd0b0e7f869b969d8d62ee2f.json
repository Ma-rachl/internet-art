{"ast":null,"code":"import * as utils from './common/utils.js';\nimport { getOptions } from './common/options.js';\nimport { getState, state } from './common/state.js';\nimport { fireCallback } from './callbacks/fireCallback.js';\nimport { isResponsiveMode } from './responsive.js';\nimport { isMacDevice, isTouchDevice, isTouch, win, doc, isIE11 } from './common/constants.js';\nimport { $body } from './common/cache.js';\nimport { AUTO_HEIGHT_RESPONSIVE, IS_OVERFLOW, OVERFLOW, OVERFLOW_SEL } from './common/selectors.js';\nimport { EventEmitter } from './common/eventEmitter.js';\nimport { getSlideOrSection } from './common/utilsFP.js';\nimport { getSectionFromPanel } from './sections.js';\nimport { events } from './common/events.js';\nimport { isInsideInput } from './common/utils.js';\nlet g_focusScrollableId;\nEventEmitter.on(events.bindEvents, bindEvents);\nfunction bindEvents() {\n  // We can't focus scrollOverflow before scrolling\n  // to the anchor (if we need to)\n  EventEmitter.on(events.onAfterRenderNoAnchor, afterRender);\n  EventEmitter.on(events.onLeave, scrollOverflowHandler.onLeave);\n  EventEmitter.on(events.onSlideLeave, scrollOverflowHandler.onLeave);\n  EventEmitter.on(events.afterSlideLoads, scrollOverflowHandler.afterLoad);\n  EventEmitter.on(events.afterSectionLoads, scrollOverflowHandler.afterLoad);\n  EventEmitter.on(events.onDestroy, onDestroy);\n  utils.docAddEvent('keyup', scrollOverflowHandler.keyUpHandler);\n}\nfunction afterRender() {\n  if (getOptions().scrollOverflow && !getOptions().scrollBar) {\n    scrollOverflowHandler.makeScrollable();\n    scrollOverflowHandler.focusScrollable();\n  }\n}\nfunction onDestroy() {\n  EventEmitter.removeListener(events.onAfterRenderNoAnchor, afterRender);\n  utils.docRemoveEvent('keyup', scrollOverflowHandler.keyUpHandler);\n}\nexport const scrollOverflowHandler = {\n  focusedElem: null,\n  shouldFocusScrollable: true,\n  isInnerScrollAllowed: true,\n  timeBeforeReachingLimit: null,\n  timeLastScroll: null,\n  preventScrollWithMouseWheel: function (e) {\n    if (!state.canScroll) {\n      utils.preventDefault(e);\n      return false;\n    }\n  },\n  preventScrollWithKeyboard: function (e) {\n    if (!isInsideInput() && getOptions().keyboardScrolling) {\n      var directionKeys = [38, 33, 32, 40, 34, 36, 35];\n      if (directionKeys.indexOf(e.keyCode) > -1 && !scrollOverflowHandler.isInnerScrollAllowed) {\n        utils.preventDefault(e);\n        return false;\n      }\n    }\n  },\n  keyUpHandler: function () {\n    scrollOverflowHandler.shouldFocusScrollable = state.canScroll;\n  },\n  // Leaving sections or slides\n  onLeave: function () {\n    clearTimeout(g_focusScrollableId);\n    scrollOverflowHandler.isInnerScrollAllowed = false;\n  },\n  // Loading sections or slides\n  afterLoad: function () {\n    scrollOverflowHandler.isInnerScrollAllowed = false;\n\n    // Delaying it to avoid issues on Safari when focusing elements #4484 & #4493\n    clearTimeout(g_focusScrollableId);\n    g_focusScrollableId = setTimeout(function () {\n      scrollOverflowHandler.shouldFocusScrollable = state.canScroll;\n    }, 200);\n  },\n  // Unfocusing the scrollable element from the orgin section/slide\n  unfocusScrollable: function () {\n    if (doc.activeElement === this.focusedElem) {\n      // @ts-ignore\n      this.focusedElem.blur();\n      scrollOverflowHandler.isInnerScrollAllowed = false;\n    }\n  },\n  focusScrollable: function () {\n    if (!getOptions().scrollOverflow || !scrollOverflowHandler.shouldFocusScrollable) {\n      return;\n    }\n    scrollOverflowHandler.unfocusScrollable();\n    var scrollableItem = scrollOverflowHandler.getScrollableItem(getState().activeSection.item);\n\n    // On desktop we focus the scrollable to be able to use the mouse wheel\n    // We avoid it on mobile due to a bug in iOS Safari\n    if (scrollableItem && !isTouchDevice && !isTouch) {\n      this.focusedElem = scrollableItem;\n\n      // Forcing the focus on the next paint \n      // to avoid issue #4484 & #4493 on Safari\n      requestAnimationFrame(function () {\n        scrollableItem.focus();\n        scrollOverflowHandler.isInnerScrollAllowed = true;\n      });\n    }\n    scrollOverflowHandler.shouldFocusScrollable = false;\n  },\n  makeScrollable: function () {\n    if (getOptions().scrollOverflowMacStyle && !isMacDevice) {\n      utils.addClass($body, 'fp-scroll-mac');\n    }\n    getState().panels.forEach(function (el) {\n      if (el.slides && el.slides.length) {\n        return;\n      }\n      if (utils.hasClass(el.item, AUTO_HEIGHT_RESPONSIVE) && isResponsiveMode()) {\n        return;\n      } else {\n        let item = getSlideOrSection(el.item);\n        const shouldBeScrollable = scrollOverflowHandler.shouldBeScrollable(el.item);\n        var section = getSectionFromPanel(el);\n        if (isIE11) {\n          var toggleAction = shouldBeScrollable ? 'addClass' : 'removeClass';\n          utils[toggleAction](section.item, IS_OVERFLOW);\n          utils[toggleAction](el.item, IS_OVERFLOW);\n        } else {\n          utils.addClass(section.item, IS_OVERFLOW);\n          utils.addClass(el.item, IS_OVERFLOW);\n        }\n        if (!el.hasScroll) {\n          scrollOverflowHandler.createWrapper(item);\n          scrollOverflowHandler.bindEvents(item);\n        }\n\n        // updating the state now in case \n        // this is executed on page load (after images load)\n        el.hasScroll = true;\n      }\n    });\n  },\n  bindEvents: function (item) {\n    scrollOverflowHandler.getScrollableItem(item).addEventListener('scroll', scrollOverflowHandler.onPanelScroll);\n    item.addEventListener('wheel', scrollOverflowHandler.preventScrollWithMouseWheel, {\n      passive: false\n    });\n    item.addEventListener('keydown', scrollOverflowHandler.preventScrollWithKeyboard, {\n      passive: false\n    });\n  },\n  createWrapper: function (item) {\n    var overflowWrapper = document.createElement('div');\n    overflowWrapper.className = OVERFLOW;\n    utils.wrapInner(item, overflowWrapper);\n    overflowWrapper.setAttribute('tabindex', '-1');\n  },\n  destroyWrapper: function (item) {\n    var overflowWrapper = utils.$(OVERFLOW_SEL, item)[0];\n    if (overflowWrapper) {\n      utils.unwrap(overflowWrapper);\n      item.removeAttribute('tabindex');\n    }\n  },\n  getScrollableItem: function (sectionItem) {\n    var panel = getSlideOrSection(sectionItem);\n    return utils.$(OVERFLOW_SEL, panel)[0] || panel;\n  },\n  hasScroll: function (panelItem) {\n    return utils.hasClass(panelItem, OVERFLOW) || utils.$(OVERFLOW_SEL, panelItem)[0] != null;\n  },\n  isScrollable: function (panel) {\n    return panel.isSection && panel.activeSlide ? panel.activeSlide.hasScroll : panel.hasScroll;\n  },\n  shouldBeScrollable: function (item) {\n    var scrollable = scrollOverflowHandler.getScrollableItem(item);\n    return scrollable.scrollHeight > win.innerHeight;\n  },\n  isScrolled: function (direction, el) {\n    if (!state.canScroll) {\n      return false;\n    }\n\n    // we won't allow scrolloverflow on scrollBar:true\n    if (getOptions().scrollBar) {\n      return true;\n    }\n    var scrollableItem = scrollOverflowHandler.getScrollableItem(el);\n    if (!getOptions().scrollOverflow || !utils.hasClass(scrollableItem, OVERFLOW) ||\n    // Checking the section first \n    // In case they apply to both section + slide #4505\n    utils.hasClass(el, 'fp-noscroll') ||\n    // Checking the slide (in case it has)\n    utils.hasClass(getSlideOrSection(el), 'fp-noscroll')) {\n      return true;\n    }\n\n    // ie11 wrongly calculates scrollHeight when using the CSS style\n    // overflow: auto   It adds 1 more pixel compared to offsetHeight\n    var ie11offset = isIE11 ? 1 : 0;\n    var positionY = scrollableItem.scrollTop;\n    var isTopReached = direction === 'up' && positionY <= 0;\n    var isBottomReached = direction === 'down' && scrollableItem.scrollHeight <= Math.ceil(scrollableItem.offsetHeight + positionY) + ie11offset;\n    var isScrolled = isTopReached || isBottomReached;\n    if (!isScrolled) {\n      this.timeBeforeReachingLimit = new Date().getTime();\n    }\n    return isScrolled;\n  },\n  shouldMovePage: function () {\n    this.timeLastScroll = new Date().getTime();\n    var timeDiff = this.timeLastScroll - scrollOverflowHandler.timeBeforeReachingLimit;\n    var isUsingTouch = isTouchDevice || isTouch;\n    var isGrabbing = isUsingTouch && state.isGrabbing;\n    var isNotFirstTimeReachingLimit = state.isUsingWheel && timeDiff > 600;\n    return isGrabbing && timeDiff > 400 || isNotFirstTimeReachingLimit;\n  },\n  onPanelScroll: function () {\n    var prevPosition = 0;\n    return function (e) {\n      var currentPosition = e.target.scrollTop;\n      var direction = state.touchDirection !== 'none' ? state.touchDirection : prevPosition < currentPosition ? 'down' : 'up';\n      prevPosition = currentPosition;\n      if (utils.isFunction(getOptions().onScrollOverflow)) {\n        fireCallback('onScrollOverflow', {\n          position: currentPosition,\n          direction: direction\n        });\n      }\n      if (utils.hasClass(e.target, OVERFLOW) && state.canScroll) {\n        if (scrollOverflowHandler.isScrolled(direction, e.target) && scrollOverflowHandler.shouldMovePage()) {\n          // Checking again if we have a scrollable content\n          // To avoid issues like #4479 where the scroll event gets\n          // triggered after removing/hidding content if this was scrolled\n          if (scrollOverflowHandler.shouldBeScrollable(getState().activeSection.item)) {\n            EventEmitter.emit(events.onScrollOverflowScrolled, {\n              direction: direction\n            });\n          }\n        }\n      }\n    };\n  }()\n};","map":{"version":3,"names":["utils","getOptions","getState","state","fireCallback","isResponsiveMode","isMacDevice","isTouchDevice","isTouch","win","doc","isIE11","$body","AUTO_HEIGHT_RESPONSIVE","IS_OVERFLOW","OVERFLOW","OVERFLOW_SEL","EventEmitter","getSlideOrSection","getSectionFromPanel","events","isInsideInput","g_focusScrollableId","on","bindEvents","onAfterRenderNoAnchor","afterRender","onLeave","scrollOverflowHandler","onSlideLeave","afterSlideLoads","afterLoad","afterSectionLoads","onDestroy","docAddEvent","keyUpHandler","scrollOverflow","scrollBar","makeScrollable","focusScrollable","removeListener","docRemoveEvent","focusedElem","shouldFocusScrollable","isInnerScrollAllowed","timeBeforeReachingLimit","timeLastScroll","preventScrollWithMouseWheel","e","canScroll","preventDefault","preventScrollWithKeyboard","keyboardScrolling","directionKeys","indexOf","keyCode","clearTimeout","setTimeout","unfocusScrollable","activeElement","blur","scrollableItem","getScrollableItem","activeSection","item","requestAnimationFrame","focus","scrollOverflowMacStyle","addClass","panels","forEach","el","slides","length","hasClass","shouldBeScrollable","section","toggleAction","hasScroll","createWrapper","addEventListener","onPanelScroll","passive","overflowWrapper","document","createElement","className","wrapInner","setAttribute","destroyWrapper","$","unwrap","removeAttribute","sectionItem","panel","panelItem","isScrollable","isSection","activeSlide","scrollable","scrollHeight","innerHeight","isScrolled","direction","ie11offset","positionY","scrollTop","isTopReached","isBottomReached","Math","ceil","offsetHeight","Date","getTime","shouldMovePage","timeDiff","isUsingTouch","isGrabbing","isNotFirstTimeReachingLimit","isUsingWheel","prevPosition","currentPosition","target","touchDirection","isFunction","onScrollOverflow","position","emit","onScrollOverflowScrolled"],"sources":["/Users/rachelma/college/2023/fall/2223/internet-art/src/js/scrolloverflow.js"],"sourcesContent":["import * as utils from './common/utils.js';\nimport { getOptions } from './common/options.js';\nimport { getState, state } from './common/state.js';\nimport { fireCallback } from './callbacks/fireCallback.js';\nimport { isResponsiveMode } from './responsive.js';\nimport { isMacDevice, isTouchDevice, isTouch, win, doc, isIE11 } from './common/constants.js';\nimport { $body } from './common/cache.js';\nimport { \n    AUTO_HEIGHT_RESPONSIVE,\n    IS_OVERFLOW,\n    OVERFLOW,\n    OVERFLOW_SEL\n} from './common/selectors.js';\nimport { EventEmitter } from './common/eventEmitter.js';\nimport { getSlideOrSection } from './common/utilsFP.js';\nimport { getSectionFromPanel } from './sections.js';\nimport { events } from './common/events.js';\nimport { isInsideInput } from './common/utils.js';\n\nlet g_focusScrollableId;\n\nEventEmitter.on(events.bindEvents, bindEvents);\n\nfunction bindEvents(){\n    // We can't focus scrollOverflow before scrolling\n    // to the anchor (if we need to)\n    EventEmitter.on(events.onAfterRenderNoAnchor, afterRender);\n\n    EventEmitter.on(events.onLeave, scrollOverflowHandler.onLeave);\n    EventEmitter.on(events.onSlideLeave, scrollOverflowHandler.onLeave);\n    EventEmitter.on(events.afterSlideLoads, scrollOverflowHandler.afterLoad);\n    EventEmitter.on(events.afterSectionLoads, scrollOverflowHandler.afterLoad);\n    EventEmitter.on(events.onDestroy, onDestroy);\n\n    utils.docAddEvent('keyup', scrollOverflowHandler.keyUpHandler);\n}\n\nfunction afterRender(){\n    if(getOptions().scrollOverflow && !getOptions().scrollBar){\n        scrollOverflowHandler.makeScrollable();\n        scrollOverflowHandler.focusScrollable();\n    }\n}\n\nfunction onDestroy(){\n    EventEmitter.removeListener(events.onAfterRenderNoAnchor, afterRender);\n    utils.docRemoveEvent('keyup', scrollOverflowHandler.keyUpHandler);\n}\n\nexport const scrollOverflowHandler = {\n    focusedElem: null,\n\n    shouldFocusScrollable: true,\n\n    isInnerScrollAllowed: true,\n\n    timeBeforeReachingLimit: null,\n\n    timeLastScroll: null,\n\n    preventScrollWithMouseWheel: function(e){\n        if(!state.canScroll){\n            utils.preventDefault(e);\n            return false;\n        }\n    },\n\n    preventScrollWithKeyboard: function(e){\n        if( !isInsideInput() && getOptions().keyboardScrolling ){\n            var directionKeys = [38, 33, 32, 40, 34, 36, 35];\n            if( directionKeys.indexOf(e.keyCode) > -1 && !scrollOverflowHandler.isInnerScrollAllowed){\n                utils.preventDefault(e);\n                return false;\n            }\n        }\n    },\n\n    keyUpHandler: function(){\n        scrollOverflowHandler.shouldFocusScrollable = state.canScroll;\n    },\n\n    // Leaving sections or slides\n    onLeave: function(){\n        clearTimeout(g_focusScrollableId);\n        scrollOverflowHandler.isInnerScrollAllowed = false;\n    },\n\n    // Loading sections or slides\n    afterLoad: function(){\n        scrollOverflowHandler.isInnerScrollAllowed = false;\n\n        // Delaying it to avoid issues on Safari when focusing elements #4484 & #4493\n        clearTimeout(g_focusScrollableId);\n        g_focusScrollableId = setTimeout(function(){\n            scrollOverflowHandler.shouldFocusScrollable = state.canScroll;\n        }, 200);\n    },\n\n    // Unfocusing the scrollable element from the orgin section/slide\n    unfocusScrollable: function(){\n         if( doc.activeElement === this.focusedElem){\n            // @ts-ignore\n            this.focusedElem.blur();\n\n            scrollOverflowHandler.isInnerScrollAllowed = false;\n        }\n    },\n\n    focusScrollable: function(){\n\n        if(!getOptions().scrollOverflow || !scrollOverflowHandler.shouldFocusScrollable){\n            return;\n        }\n        \n        scrollOverflowHandler.unfocusScrollable();\n       \n        var scrollableItem = scrollOverflowHandler.getScrollableItem(getState().activeSection.item);\n\n        // On desktop we focus the scrollable to be able to use the mouse wheel\n        // We avoid it on mobile due to a bug in iOS Safari\n        if( scrollableItem && !isTouchDevice && !isTouch){\n            this.focusedElem = scrollableItem;\n\n            // Forcing the focus on the next paint \n            // to avoid issue #4484 & #4493 on Safari\n            requestAnimationFrame(function(){\n                scrollableItem.focus();\n                scrollOverflowHandler.isInnerScrollAllowed = true;\n            });\n        }\n\n        scrollOverflowHandler.shouldFocusScrollable = false;\n    },\n\n    makeScrollable: function(){\n        if(getOptions().scrollOverflowMacStyle && !isMacDevice){\n            utils.addClass($body, 'fp-scroll-mac');\n        }\n        \n        getState().panels.forEach(function(el){\n            if(el.slides && el.slides.length){\n                return;\n            }\n            if(\n                utils.hasClass(el.item, AUTO_HEIGHT_RESPONSIVE) && isResponsiveMode()\n            ){\n                return;\n            }else{\n                let item = getSlideOrSection(el.item);\n                const shouldBeScrollable = scrollOverflowHandler.shouldBeScrollable(el.item);\n                var section = getSectionFromPanel(el);\n\n                if(isIE11){\n                    var toggleAction = shouldBeScrollable ? 'addClass' : 'removeClass';\n                    utils[toggleAction](section.item, IS_OVERFLOW); \n                    utils[toggleAction](el.item, IS_OVERFLOW);  \n                }\n                else{\n                    utils.addClass(section.item, IS_OVERFLOW); \n                    utils.addClass(el.item, IS_OVERFLOW);  \n                }\n                \n                if(!el.hasScroll){\n                    scrollOverflowHandler.createWrapper(item);\n                    scrollOverflowHandler.bindEvents(item);\n                }\n\n                // updating the state now in case \n                // this is executed on page load (after images load)\n                el.hasScroll = true;\n            }\n        });\n    },\n\n    bindEvents: function(item){\n        scrollOverflowHandler.getScrollableItem(item).addEventListener('scroll', scrollOverflowHandler.onPanelScroll);\n\n        item.addEventListener('wheel', scrollOverflowHandler.preventScrollWithMouseWheel, {passive: false});\n        item.addEventListener('keydown', scrollOverflowHandler.preventScrollWithKeyboard, {passive: false});\n    },\n\n    createWrapper: function(item){\n        var overflowWrapper = document.createElement('div');\n        overflowWrapper.className = OVERFLOW;\n\n        utils.wrapInner(item, overflowWrapper);\n        overflowWrapper.setAttribute('tabindex', '-1');\n    },\n\n    destroyWrapper: function(item){\n        var overflowWrapper = utils.$(OVERFLOW_SEL, item)[0];\n        if(overflowWrapper){\n            utils.unwrap(overflowWrapper);\n            item.removeAttribute('tabindex');\n        }\n    },\n\n    getScrollableItem: function(sectionItem){\n        var panel = getSlideOrSection(sectionItem);\n\n        return utils.$(OVERFLOW_SEL, panel)[0] || panel;\n    },\n\n    hasScroll: function(panelItem){\n        return utils.hasClass(panelItem, OVERFLOW) || utils.$(OVERFLOW_SEL, panelItem)[0] != null;\n    },\n\n    isScrollable: function(panel){\n        return panel.isSection && panel.activeSlide ? panel.activeSlide.hasScroll : panel.hasScroll;\n    },\n\n    shouldBeScrollable: function(item){\n        var scrollable = scrollOverflowHandler.getScrollableItem(item);\n        return scrollable.scrollHeight > win.innerHeight;\n    },\n\n    isScrolled: function(direction, el){\n        if(!state.canScroll){\n            return false;\n        }\n\n        // we won't allow scrolloverflow on scrollBar:true\n        if(getOptions().scrollBar){\n            return true;\n        }\n\n        var scrollableItem = scrollOverflowHandler.getScrollableItem(el);\n\n        if(!getOptions().scrollOverflow || \n            !utils.hasClass(scrollableItem, OVERFLOW) ||\n\n            // Checking the section first \n            // In case they apply to both section + slide #4505\n            utils.hasClass(el, 'fp-noscroll') || \n\n            // Checking the slide (in case it has)\n            utils.hasClass(getSlideOrSection(el), 'fp-noscroll')\n        ){\n            return true;\n        }\n        \n        // ie11 wrongly calculates scrollHeight when using the CSS style\n        // overflow: auto   It adds 1 more pixel compared to offsetHeight\n        var ie11offset = isIE11 ? 1 : 0;\n\n        var positionY = scrollableItem.scrollTop;\n        var isTopReached = direction === 'up' && positionY <=0;\n        var isBottomReached = direction === 'down' && scrollableItem.scrollHeight <= Math.ceil(scrollableItem.offsetHeight + positionY) + ie11offset;\n        var isScrolled = isTopReached || isBottomReached;\n\n        if(!isScrolled){\n            this.timeBeforeReachingLimit = new Date().getTime();\n        }\n        return isScrolled;\n    },\n\n    shouldMovePage: function(){\n        this.timeLastScroll = new Date().getTime();\n        var timeDiff = this.timeLastScroll - scrollOverflowHandler.timeBeforeReachingLimit;\n        var isUsingTouch = isTouchDevice || isTouch;\n        var isGrabbing = isUsingTouch && state.isGrabbing;\n        var isNotFirstTimeReachingLimit = state.isUsingWheel && timeDiff > 600;\n\n        return isGrabbing && timeDiff > 400 || isNotFirstTimeReachingLimit;\n    },\n    onPanelScroll: (function(){\n        var prevPosition = 0;\n\n        return function(e){\n            var currentPosition = e.target.scrollTop;\n            var direction = state.touchDirection !== 'none' ? state.touchDirection : prevPosition < currentPosition ? 'down' : 'up';\n            prevPosition = currentPosition;\n            \n            if(utils.isFunction(getOptions().onScrollOverflow) ){\n                fireCallback('onScrollOverflow', {\n                    position: currentPosition,\n                    direction: direction\n                });\n            }\n\n            if(utils.hasClass(e.target, OVERFLOW) && state.canScroll){\n                if(\n                    scrollOverflowHandler.isScrolled(direction, e.target) &&\n                    scrollOverflowHandler.shouldMovePage()\n                ){\n                    // Checking again if we have a scrollable content\n                    // To avoid issues like #4479 where the scroll event gets\n                    // triggered after removing/hidding content if this was scrolled\n                    if(scrollOverflowHandler.shouldBeScrollable(getState().activeSection.item)){\n\n                        EventEmitter.emit(events.onScrollOverflowScrolled, {\n                            direction: direction\n                        });\n                    }\n                }\n            }\n        };\n    })()\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}